<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>qcolortrclut_p.h source code [qtbase-6.5.0/src/gui/painting/qcolortrclut_p.h] - Woboq Code Browser</title>
<meta name="woboq:interestingDefinitions" content="QColorTrcLut "/>
<link rel="stylesheet" href="../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'qtbase-6.5.0/src/gui/painting/qcolortrclut_p.h'; var root_path = '../../../..'; var data_path = '../../../../../data'; var ecma_script_api_version = 2;</script>
<script src='../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>qtbase-6.5.0</a>/<a href='../..'>src</a>/<a href='..'>gui</a>/<a href='./'>painting</a>/<a href='qcolortrclut_p.h.html'>qcolortrclut_p.h</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>// Copyright (C) 2016 The Qt Company Ltd.</i></td></tr>
<tr><th id="2">2</th><td><i>// SPDX-License-Identifier: LicenseRef-Qt-Commercial OR LGPL-3.0-only OR GPL-2.0-only OR GPL-3.0-only</i></td></tr>
<tr><th id="3">3</th><td></td></tr>
<tr><th id="4">4</th><td><u>#<span data-ppcond="4">ifndef</span> <span class="macro" data-ref="_M/QCOLORTRCLUT_P_H">QCOLORTRCLUT_P_H</span></u></td></tr>
<tr><th id="5">5</th><td><u>#define <dfn class="macro" id="_M/QCOLORTRCLUT_P_H" data-ref="_M/QCOLORTRCLUT_P_H">QCOLORTRCLUT_P_H</dfn></u></td></tr>
<tr><th id="6">6</th><td></td></tr>
<tr><th id="7">7</th><td><i>//</i></td></tr>
<tr><th id="8">8</th><td><i>//  W A R N I N G</i></td></tr>
<tr><th id="9">9</th><td><i>//  -------------</i></td></tr>
<tr><th id="10">10</th><td><i>//</i></td></tr>
<tr><th id="11">11</th><td><i>// This file is not part of the Qt API.  It exists purely as an</i></td></tr>
<tr><th id="12">12</th><td><i>// implementation detail.  This header file may change from version to</i></td></tr>
<tr><th id="13">13</th><td><i>// version without notice, or even be removed.</i></td></tr>
<tr><th id="14">14</th><td><i>//</i></td></tr>
<tr><th id="15">15</th><td><i>// We mean it.</i></td></tr>
<tr><th id="16">16</th><td><i>//</i></td></tr>
<tr><th id="17">17</th><td></td></tr>
<tr><th id="18">18</th><td><u>#include <a href="../../../build/include/QtGui/6.5.0/QtGui/private/qtguiglobal_p.h.html">&lt;QtGui/private/qtguiglobal_p.h&gt;</a></u></td></tr>
<tr><th id="19">19</th><td><u>#include <a href="../../../build/include/QtGui/qrgb.h.html">&lt;QtGui/qrgb.h&gt;</a></u></td></tr>
<tr><th id="20">20</th><td><u>#include <a href="../../../build/include/QtGui/qrgba64.h.html">&lt;QtGui/qrgba64.h&gt;</a></u></td></tr>
<tr><th id="21">21</th><td></td></tr>
<tr><th id="22">22</th><td><u>#include <a href="../../../../include/c++/9/cmath.html">&lt;cmath&gt;</a></u></td></tr>
<tr><th id="23">23</th><td><u>#include <a href="../../../../include/c++/9/memory.html">&lt;memory&gt;</a></u></td></tr>
<tr><th id="24">24</th><td></td></tr>
<tr><th id="25">25</th><td><u>#<span data-ppcond="25">if</span> defined(<span class="macro" data-ref="_M/__SSE2__">__SSE2__</span>)</u></td></tr>
<tr><th id="26">26</th><td><u>#include &lt;emmintrin.h&gt;</u></td></tr>
<tr><th id="27">27</th><td><u>#<span data-ppcond="25">elif</span> defined(__ARM_NEON__) || defined(__ARM_NEON)</u></td></tr>
<tr><th id="28">28</th><td><u>#include &lt;arm_neon.h&gt;</u></td></tr>
<tr><th id="29">29</th><td><u>#<span data-ppcond="25">endif</span></u></td></tr>
<tr><th id="30">30</th><td></td></tr>
<tr><th id="31">31</th><td><a class="macro" href="../../corelib/global/qtconfigmacros.h.html#103" title="" data-ref="_M/QT_BEGIN_NAMESPACE">QT_BEGIN_NAMESPACE</a></td></tr>
<tr><th id="32">32</th><td></td></tr>
<tr><th id="33">33</th><td><b>class</b> <a class="type" href="qcolortransferfunction_p.h.html#QColorTransferFunction" title='QColorTransferFunction' data-ref="QColorTransferFunction" id="QColorTransferFunction">QColorTransferFunction</a>;</td></tr>
<tr><th id="34">34</th><td><b>class</b> <a class="type" href="qcolortransfertable_p.h.html#QColorTransferTable" title='QColorTransferTable' data-ref="QColorTransferTable" id="QColorTransferTable">QColorTransferTable</a>;</td></tr>
<tr><th id="35">35</th><td></td></tr>
<tr><th id="36">36</th><td><b>class</b> <a class="macro" href="../../../build/include/QtGui/qtguiexports.h.html#11" title="__attribute__((visibility(&quot;default&quot;)))" data-ref="_M/Q_GUI_EXPORT">Q_GUI_EXPORT</a> <dfn class="type def" id="QColorTrcLut" title='QColorTrcLut' data-ref="QColorTrcLut">QColorTrcLut</dfn></td></tr>
<tr><th id="37">37</th><td>{</td></tr>
<tr><th id="38">38</th><td><b>public</b>:</td></tr>
<tr><th id="39">39</th><td>    <em>static</em> <span class="namespace">std::</span><a class="type" href="../../../../include/c++/9/bits/shared_ptr_base.h.html#std::shared_ptr" title='std::shared_ptr' data-ref="std::shared_ptr">shared_ptr</a>&lt;<a class="type" href="#QColorTrcLut" title='QColorTrcLut' data-ref="QColorTrcLut">QColorTrcLut</a>&gt; <dfn class="decl fn" id="_ZN12QColorTrcLut9fromGammaEd" title='QColorTrcLut::fromGamma' data-ref="_ZN12QColorTrcLut9fromGammaEd">fromGamma</dfn>(<a class="typedef" href="../../corelib/global/qtypes.h.html#qreal" title='qreal' data-type='double' data-ref="qreal">qreal</a> <dfn class="local col4 decl" id="114gamma" title='gamma' data-type='qreal' data-ref="114gamma">gamma</dfn>);</td></tr>
<tr><th id="40">40</th><td>    <em>static</em> <span class="namespace">std::</span><a class="type" href="../../../../include/c++/9/bits/shared_ptr_base.h.html#std::shared_ptr" title='std::shared_ptr' data-ref="std::shared_ptr">shared_ptr</a>&lt;<a class="type" href="#QColorTrcLut" title='QColorTrcLut' data-ref="QColorTrcLut">QColorTrcLut</a>&gt; <dfn class="decl fn" id="_ZN12QColorTrcLut20fromTransferFunctionERK22QColorTransferFunction" title='QColorTrcLut::fromTransferFunction' data-ref="_ZN12QColorTrcLut20fromTransferFunctionERK22QColorTransferFunction">fromTransferFunction</dfn>(<em>const</em> <a class="type" href="qcolortransferfunction_p.h.html#QColorTransferFunction" title='QColorTransferFunction' data-ref="QColorTransferFunction">QColorTransferFunction</a> &amp;<dfn class="local col5 decl" id="115transfn" title='transfn' data-type='const QColorTransferFunction &amp;' data-ref="115transfn">transfn</dfn>);</td></tr>
<tr><th id="41">41</th><td>    <em>static</em> <span class="namespace">std::</span><a class="type" href="../../../../include/c++/9/bits/shared_ptr_base.h.html#std::shared_ptr" title='std::shared_ptr' data-ref="std::shared_ptr">shared_ptr</a>&lt;<a class="type" href="#QColorTrcLut" title='QColorTrcLut' data-ref="QColorTrcLut">QColorTrcLut</a>&gt; <dfn class="decl fn" id="_ZN12QColorTrcLut17fromTransferTableERK19QColorTransferTable" title='QColorTrcLut::fromTransferTable' data-ref="_ZN12QColorTrcLut17fromTransferTableERK19QColorTransferTable">fromTransferTable</dfn>(<em>const</em> <a class="type" href="qcolortransfertable_p.h.html#QColorTransferTable" title='QColorTransferTable' data-ref="QColorTransferTable">QColorTransferTable</a> &amp;<dfn class="local col6 decl" id="116transTable" title='transTable' data-type='const QColorTransferTable &amp;' data-ref="116transTable">transTable</dfn>);</td></tr>
<tr><th id="42">42</th><td></td></tr>
<tr><th id="43">43</th><td>    <i>// The following methods all convert opaque or unpremultiplied colors:</i></td></tr>
<tr><th id="44">44</th><td></td></tr>
<tr><th id="45">45</th><td>    <a class="type" href="qrgba64.h.html#QRgba64" title='QRgba64' data-ref="QRgba64">QRgba64</a> <dfn class="decl def fn" id="_ZNK12QColorTrcLut10toLinear64Ej" title='QColorTrcLut::toLinear64' data-ref="_ZNK12QColorTrcLut10toLinear64Ej">toLinear64</dfn>(<a class="typedef" href="qrgb.h.html#QRgb" title='QRgb' data-type='unsigned int' data-ref="QRgb">QRgb</a> <dfn class="local col7 decl" id="117rgb32" title='rgb32' data-type='QRgb' data-ref="117rgb32">rgb32</dfn>) <em>const</em></td></tr>
<tr><th id="46">46</th><td>    {</td></tr>
<tr><th id="47">47</th><td><u>#<span data-ppcond="47">if</span> defined(<span class="macro" data-ref="_M/__SSE2__">__SSE2__</span>)</u></td></tr>
<tr><th id="48">48</th><td>        <span class='typedef' title='__m128i' data-type='__attribute__((__vector_size__(2 * sizeof(long long)))) long long' data-ref="__m128i">__m128i</span> <dfn class="local col8 decl" id="118v" title='v' data-type='__m128i' data-ref="118v">v</dfn> = <span class='ref fn' title='_mm_cvtsi32_si128' data-ref="_ZL17_mm_cvtsi32_si128i">_mm_cvtsi32_si128</span>(<span class='inlayHint'>a:&nbsp;</span><a class="local col7 ref" href="#117rgb32" title='rgb32' data-ref="117rgb32">rgb32</a>);</td></tr>
<tr><th id="49">49</th><td>        <a class="local col8 ref" href="#118v" title='v' data-ref="118v">v</a> = <span class='ref fn' title='_mm_unpacklo_epi8' data-ref="_ZL17_mm_unpacklo_epi8Dv2_xS_">_mm_unpacklo_epi8</span>(<span class='inlayHint'>a:&nbsp;</span><a class="local col8 ref" href="#118v" title='v' data-ref="118v">v</a>, <span class='inlayHint'>b:&nbsp;</span><span class='ref fn' title='_mm_setzero_si128' data-ref="_ZL17_mm_setzero_si128v">_mm_setzero_si128</span>());</td></tr>
<tr><th id="50">50</th><td>        <em>const</em> <span class='typedef' title='__m128i' data-type='__attribute__((__vector_size__(2 * sizeof(long long)))) long long' data-ref="__m128i">__m128i</span> <dfn class="local col9 decl" id="119vidx" title='vidx' data-type='const __m128i' data-ref="119vidx">vidx</dfn> = <span class='ref fn' title='_mm_slli_epi16' data-ref="_ZL14_mm_slli_epi16Dv2_xi">_mm_slli_epi16</span>(<span class='inlayHint'>a:&nbsp;</span><a class="local col8 ref" href="#118v" title='v' data-ref="118v">v</a>, <span class='inlayHint'>count:&nbsp;</span><var>4</var>);</td></tr>
<tr><th id="51">51</th><td>        <em>const</em> <em>int</em> <dfn class="local col0 decl" id="120ridx" title='ridx' data-type='const int' data-ref="120ridx">ridx</dfn> = <span class="macro" title="((int)(unsigned short)__builtin_ia32_vec_ext_v8hi((__v8hi)(__m128i)(vidx), (int)(2)))" data-ref="_M/_mm_extract_epi16">_mm_extract_epi16</span>(<a class="local col9 ref" href="#119vidx" title='vidx' data-ref="119vidx">vidx</a>, <var>2</var>);</td></tr>
<tr><th id="52">52</th><td>        <em>const</em> <em>int</em> <dfn class="local col1 decl" id="121gidx" title='gidx' data-type='const int' data-ref="121gidx">gidx</dfn> = <span class="macro" title="((int)(unsigned short)__builtin_ia32_vec_ext_v8hi((__v8hi)(__m128i)(vidx), (int)(1)))" data-ref="_M/_mm_extract_epi16">_mm_extract_epi16</span>(<a class="local col9 ref" href="#119vidx" title='vidx' data-ref="119vidx">vidx</a>, <var>1</var>);</td></tr>
<tr><th id="53">53</th><td>        <em>const</em> <em>int</em> <dfn class="local col2 decl" id="122bidx" title='bidx' data-type='const int' data-ref="122bidx">bidx</dfn> = <span class="macro" title="((int)(unsigned short)__builtin_ia32_vec_ext_v8hi((__v8hi)(__m128i)(vidx), (int)(0)))" data-ref="_M/_mm_extract_epi16">_mm_extract_epi16</span>(<a class="local col9 ref" href="#119vidx" title='vidx' data-ref="119vidx">vidx</a>, <var>0</var>);</td></tr>
<tr><th id="54">54</th><td>        <a class="local col8 ref" href="#118v" title='v' data-ref="118v">v</a> = <span class='ref fn' title='_mm_slli_epi16' data-ref="_ZL14_mm_slli_epi16Dv2_xi">_mm_slli_epi16</span>(<span class='inlayHint'>a:&nbsp;</span><a class="local col8 ref" href="#118v" title='v' data-ref="118v">v</a>, <span class='inlayHint'>count:&nbsp;</span><var>8</var>); <i>// a * 256</i></td></tr>
<tr><th id="55">55</th><td>        <a class="local col8 ref" href="#118v" title='v' data-ref="118v">v</a> = <span class="macro" title="((__m128i)__builtin_ia32_vec_set_v8hi((__v8hi)(__m128i)(v), (int)(m_toLinear[ridx]), (int)(0)))" data-ref="_M/_mm_insert_epi16">_mm_insert_epi16</span>(<a class="local col8 ref" href="#118v" title='v' data-ref="118v">v</a>, <a class="member field" href="#QColorTrcLut::m_toLinear" title='QColorTrcLut::m_toLinear' data-ref="QColorTrcLut::m_toLinear">m_toLinear</a>[<a class="local col0 ref" href="#120ridx" title='ridx' data-ref="120ridx">ridx</a>], <var>0</var>);</td></tr>
<tr><th id="56">56</th><td>        <a class="local col8 ref" href="#118v" title='v' data-ref="118v">v</a> = <span class="macro" title="((__m128i)__builtin_ia32_vec_set_v8hi((__v8hi)(__m128i)(v), (int)(m_toLinear[gidx]), (int)(1)))" data-ref="_M/_mm_insert_epi16">_mm_insert_epi16</span>(<a class="local col8 ref" href="#118v" title='v' data-ref="118v">v</a>, <a class="member field" href="#QColorTrcLut::m_toLinear" title='QColorTrcLut::m_toLinear' data-ref="QColorTrcLut::m_toLinear">m_toLinear</a>[<a class="local col1 ref" href="#121gidx" title='gidx' data-ref="121gidx">gidx</a>], <var>1</var>);</td></tr>
<tr><th id="57">57</th><td>        <a class="local col8 ref" href="#118v" title='v' data-ref="118v">v</a> = <span class="macro" title="((__m128i)__builtin_ia32_vec_set_v8hi((__v8hi)(__m128i)(v), (int)(m_toLinear[bidx]), (int)(2)))" data-ref="_M/_mm_insert_epi16">_mm_insert_epi16</span>(<a class="local col8 ref" href="#118v" title='v' data-ref="118v">v</a>, <a class="member field" href="#QColorTrcLut::m_toLinear" title='QColorTrcLut::m_toLinear' data-ref="QColorTrcLut::m_toLinear">m_toLinear</a>[<a class="local col2 ref" href="#122bidx" title='bidx' data-ref="122bidx">bidx</a>], <var>2</var>);</td></tr>
<tr><th id="58">58</th><td>        <a class="local col8 ref" href="#118v" title='v' data-ref="118v">v</a> = <span class='ref fn' title='_mm_add_epi16' data-ref="_ZL13_mm_add_epi16Dv2_xS_">_mm_add_epi16</span>(<span class='inlayHint'>a:&nbsp;</span><a class="local col8 ref" href="#118v" title='v' data-ref="118v">v</a>, <span class='inlayHint'>b:&nbsp;</span><span class='ref fn' title='_mm_srli_epi16' data-ref="_ZL14_mm_srli_epi16Dv2_xi">_mm_srli_epi16</span>(<span class='inlayHint'>a:&nbsp;</span><a class="local col8 ref" href="#118v" title='v' data-ref="118v">v</a>, <span class='inlayHint'>count:&nbsp;</span><var>8</var>));</td></tr>
<tr><th id="59">59</th><td>        <a class="type" href="qrgba64.h.html#QRgba64" title='QRgba64' data-ref="QRgba64">QRgba64</a> <a class="ref fn fake" href="qrgba64.h.html#_ZN7QRgba64C1Ev" title='QRgba64::QRgba64' data-ref="_ZN7QRgba64C1Ev"></a><dfn class="local col3 decl" id="123rgba64" title='rgba64' data-type='QRgba64' data-ref="123rgba64">rgba64</dfn>;</td></tr>
<tr><th id="60">60</th><td>        <span class='ref fn' title='_mm_storel_epi64' data-ref="_ZL16_mm_storel_epi64PDv2_xS_">_mm_storel_epi64</span>(<span class='inlayHint'>p:&nbsp;</span><b>reinterpret_cast</b>&lt;<span class='typedef' title='__m128i' data-type='__attribute__((__vector_size__(2 * sizeof(long long)))) long long' data-ref="__m128i">__m128i</span> *&gt;(&amp;<a class="local col3 ref" href="#123rgba64" title='rgba64' data-ref="123rgba64">rgba64</a>), <span class='inlayHint'>a:&nbsp;</span><a class="local col8 ref" href="#118v" title='v' data-ref="118v">v</a>);</td></tr>
<tr><th id="61">61</th><td>        <b>return</b> <a class="ref fn fake" href="qrgba64.h.html#12" title='QRgba64::QRgba64' data-ref="_ZN7QRgba64C1EOS_"></a><a class="local col3 ref" href="#123rgba64" title='rgba64' data-ref="123rgba64">rgba64</a>;</td></tr>
<tr><th id="62">62</th><td><u>#<span data-ppcond="47">elif</span> (defined(__ARM_NEON__) || defined(__ARM_NEON)) &amp;&amp; Q_BYTE_ORDER == Q_LITTLE_ENDIAN</u></td></tr>
<tr><th id="63">63</th><td>        uint8x8_t v8 = vreinterpret_u8_u32(vmov_n_u32(rgb32));</td></tr>
<tr><th id="64">64</th><td>        uint16x4_t v16 = vget_low_u16(vmovl_u8(v8));</td></tr>
<tr><th id="65">65</th><td>        <em>const</em> uint16x4_t vidx = vshl_n_u16(v16, <var>4</var>);</td></tr>
<tr><th id="66">66</th><td>        <em>const</em> <em>int</em> ridx = vget_lane_u16(vidx, <var>2</var>);</td></tr>
<tr><th id="67">67</th><td>        <em>const</em> <em>int</em> gidx = vget_lane_u16(vidx, <var>1</var>);</td></tr>
<tr><th id="68">68</th><td>        <em>const</em> <em>int</em> bidx = vget_lane_u16(vidx, <var>0</var>);</td></tr>
<tr><th id="69">69</th><td>        v16 = vshl_n_u16(v16, <var>8</var>); <i>// a * 256</i></td></tr>
<tr><th id="70">70</th><td>        v16 = vset_lane_u16(m_toLinear[ridx], v16, <var>0</var>);</td></tr>
<tr><th id="71">71</th><td>        v16 = vset_lane_u16(m_toLinear[gidx], v16, <var>1</var>);</td></tr>
<tr><th id="72">72</th><td>        v16 = vset_lane_u16(m_toLinear[bidx], v16, <var>2</var>);</td></tr>
<tr><th id="73">73</th><td>        v16 = vadd_u16(v16, vshr_n_u16(v16, <var>8</var>));</td></tr>
<tr><th id="74">74</th><td>        <b>return</b> QRgba64::fromRgba64(vget_lane_u64(vreinterpret_u64_u16(v16), <var>0</var>));</td></tr>
<tr><th id="75">75</th><td><u>#else</u></td></tr>
<tr><th id="76">76</th><td>        uint r = m_toLinear[qRed(rgb32) &lt;&lt; <var>4</var>];</td></tr>
<tr><th id="77">77</th><td>        uint g = m_toLinear[qGreen(rgb32) &lt;&lt; <var>4</var>];</td></tr>
<tr><th id="78">78</th><td>        uint b = m_toLinear[qBlue(rgb32) &lt;&lt; <var>4</var>];</td></tr>
<tr><th id="79">79</th><td>        r = r + (r &gt;&gt; <var>8</var>);</td></tr>
<tr><th id="80">80</th><td>        g = g + (g &gt;&gt; <var>8</var>);</td></tr>
<tr><th id="81">81</th><td>        b = b + (b &gt;&gt; <var>8</var>);</td></tr>
<tr><th id="82">82</th><td>        <b>return</b> QRgba64::fromRgba64(r, g, b, qAlpha(rgb32) * <var>257</var>);</td></tr>
<tr><th id="83">83</th><td><u>#<span data-ppcond="47">endif</span></u></td></tr>
<tr><th id="84">84</th><td>    }</td></tr>
<tr><th id="85">85</th><td>    <a class="type" href="qrgba64.h.html#QRgba64" title='QRgba64' data-ref="QRgba64">QRgba64</a> <dfn class="decl def fn" id="_ZNK12QColorTrcLut10toLinear64E7QRgba64" title='QColorTrcLut::toLinear64' data-ref="_ZNK12QColorTrcLut10toLinear64E7QRgba64">toLinear64</dfn>(<a class="type" href="qrgba64.h.html#QRgba64" title='QRgba64' data-ref="QRgba64">QRgba64</a>) <em>const</em> = <b>delete</b>;</td></tr>
<tr><th id="86">86</th><td></td></tr>
<tr><th id="87">87</th><td>    <a class="typedef" href="qrgb.h.html#QRgb" title='QRgb' data-type='unsigned int' data-ref="QRgb">QRgb</a> <dfn class="decl def fn" id="_ZNK12QColorTrcLut8toLinearEj" title='QColorTrcLut::toLinear' data-ref="_ZNK12QColorTrcLut8toLinearEj">toLinear</dfn>(<a class="typedef" href="qrgb.h.html#QRgb" title='QRgb' data-type='unsigned int' data-ref="QRgb">QRgb</a> <dfn class="local col4 decl" id="124rgb32" title='rgb32' data-type='QRgb' data-ref="124rgb32">rgb32</dfn>) <em>const</em></td></tr>
<tr><th id="88">88</th><td>    {</td></tr>
<tr><th id="89">89</th><td>        <b>return</b> <a class="member fn" href="#_ZN12QColorTrcLut16convertWithTableEjPKt" title='QColorTrcLut::convertWithTable' data-ref="_ZN12QColorTrcLut16convertWithTableEjPKt">convertWithTable</a>(<a class="local col4 ref" href="#124rgb32" title='rgb32' data-ref="124rgb32">rgb32</a>, <span class='inlayHint'>table:&nbsp;</span><a class="member field" href="#QColorTrcLut::m_toLinear" title='QColorTrcLut::m_toLinear' data-ref="QColorTrcLut::m_toLinear">m_toLinear</a>);</td></tr>
<tr><th id="90">90</th><td>    }</td></tr>
<tr><th id="91">91</th><td></td></tr>
<tr><th id="92">92</th><td>    <a class="type" href="qrgba64.h.html#QRgba64" title='QRgba64' data-ref="QRgba64">QRgba64</a> <dfn class="decl def fn" id="_ZNK12QColorTrcLut8toLinearE7QRgba64" title='QColorTrcLut::toLinear' data-ref="_ZNK12QColorTrcLut8toLinearE7QRgba64">toLinear</dfn>(<a class="type" href="qrgba64.h.html#QRgba64" title='QRgba64' data-ref="QRgba64">QRgba64</a> <dfn class="local col5 decl" id="125rgb64" title='rgb64' data-type='QRgba64' data-ref="125rgb64">rgb64</dfn>) <em>const</em></td></tr>
<tr><th id="93">93</th><td>    {</td></tr>
<tr><th id="94">94</th><td>        <b>return</b> <a class="member fn" href="#_ZN12QColorTrcLut16convertWithTableE7QRgba64PKt" title='QColorTrcLut::convertWithTable' data-ref="_ZN12QColorTrcLut16convertWithTableE7QRgba64PKt">convertWithTable</a>(<a class="ref fn fake" href="qrgba64.h.html#12" title='QRgba64::QRgba64' data-ref="_ZN7QRgba64C1ERKS_"></a><a class="local col5 ref" href="#125rgb64" title='rgb64' data-ref="125rgb64">rgb64</a>, <span class='inlayHint'>table:&nbsp;</span><a class="member field" href="#QColorTrcLut::m_toLinear" title='QColorTrcLut::m_toLinear' data-ref="QColorTrcLut::m_toLinear">m_toLinear</a>);</td></tr>
<tr><th id="95">95</th><td>    }</td></tr>
<tr><th id="96">96</th><td></td></tr>
<tr><th id="97">97</th><td>    <em>float</em> <dfn class="decl def fn" id="_ZNK12QColorTrcLut13u8ToLinearF32Ei" title='QColorTrcLut::u8ToLinearF32' data-ref="_ZNK12QColorTrcLut13u8ToLinearF32Ei">u8ToLinearF32</dfn>(<em>int</em> <dfn class="local col6 decl" id="126c" title='c' data-type='int' data-ref="126c">c</dfn>) <em>const</em></td></tr>
<tr><th id="98">98</th><td>    {</td></tr>
<tr><th id="99">99</th><td>        <a class="typedef" href="../../../../include/x86_64-linux-gnu/sys/types.h.html#ushort" title='ushort' data-type='unsigned short' data-ref="ushort">ushort</a> <dfn class="local col7 decl" id="127v" title='v' data-type='ushort' data-ref="127v">v</dfn> = <a class="member field" href="#QColorTrcLut::m_toLinear" title='QColorTrcLut::m_toLinear' data-ref="QColorTrcLut::m_toLinear">m_toLinear</a>[<a class="local col6 ref" href="#126c" title='c' data-ref="126c">c</a> &lt;&lt; <var>4</var>];</td></tr>
<tr><th id="100">100</th><td>        <b>return</b> <a class="local col7 ref" href="#127v" title='v' data-ref="127v">v</a> * (<var>1.0f</var> / (<var>255</var>*<var>256</var>));</td></tr>
<tr><th id="101">101</th><td>    }</td></tr>
<tr><th id="102">102</th><td></td></tr>
<tr><th id="103">103</th><td>    <em>float</em> <dfn class="decl def fn" id="_ZNK12QColorTrcLut14u16ToLinearF32Ei" title='QColorTrcLut::u16ToLinearF32' data-ref="_ZNK12QColorTrcLut14u16ToLinearF32Ei">u16ToLinearF32</dfn>(<em>int</em> <dfn class="local col8 decl" id="128c" title='c' data-type='int' data-ref="128c">c</dfn>) <em>const</em></td></tr>
<tr><th id="104">104</th><td>    {</td></tr>
<tr><th id="105">105</th><td>        <a class="local col8 ref" href="#128c" title='c' data-ref="128c">c</a> -= (<a class="local col8 ref" href="#128c" title='c' data-ref="128c">c</a> &gt;&gt; <var>8</var>);</td></tr>
<tr><th id="106">106</th><td>        <a class="typedef" href="../../../../include/x86_64-linux-gnu/sys/types.h.html#ushort" title='ushort' data-type='unsigned short' data-ref="ushort">ushort</a> <dfn class="local col9 decl" id="129v" title='v' data-type='ushort' data-ref="129v">v</dfn> = <a class="member field" href="#QColorTrcLut::m_toLinear" title='QColorTrcLut::m_toLinear' data-ref="QColorTrcLut::m_toLinear">m_toLinear</a>[<a class="local col8 ref" href="#128c" title='c' data-ref="128c">c</a> &gt;&gt; <var>4</var>];</td></tr>
<tr><th id="107">107</th><td>        <b>return</b> <a class="local col9 ref" href="#129v" title='v' data-ref="129v">v</a> * (<var>1.0f</var> / (<var>255</var>*<var>256</var>));</td></tr>
<tr><th id="108">108</th><td>    }</td></tr>
<tr><th id="109">109</th><td></td></tr>
<tr><th id="110">110</th><td>    <em>float</em> <dfn class="decl def fn" id="_ZNK12QColorTrcLut8toLinearEf" title='QColorTrcLut::toLinear' data-ref="_ZNK12QColorTrcLut8toLinearEf">toLinear</dfn>(<em>float</em> <dfn class="local col0 decl" id="130f" title='f' data-type='float' data-ref="130f">f</dfn>) <em>const</em></td></tr>
<tr><th id="111">111</th><td>    {</td></tr>
<tr><th id="112">112</th><td>        <a class="typedef" href="../../../../include/x86_64-linux-gnu/sys/types.h.html#ushort" title='ushort' data-type='unsigned short' data-ref="ushort">ushort</a> <dfn class="local col1 decl" id="131v" title='v' data-type='ushort' data-ref="131v">v</dfn> = <a class="member field" href="#QColorTrcLut::m_toLinear" title='QColorTrcLut::m_toLinear' data-ref="QColorTrcLut::m_toLinear">m_toLinear</a>[(<em>int</em>)(<a class="local col0 ref" href="#130f" title='f' data-ref="130f">f</a> * (<var>255</var> * <var>16</var>) + <var>0.5f</var>)];</td></tr>
<tr><th id="113">113</th><td>        <b>return</b> <a class="local col1 ref" href="#131v" title='v' data-ref="131v">v</a> * (<var>1.0f</var> / (<var>255</var>*<var>256</var>));</td></tr>
<tr><th id="114">114</th><td>    }</td></tr>
<tr><th id="115">115</th><td></td></tr>
<tr><th id="116">116</th><td>    <a class="typedef" href="qrgb.h.html#QRgb" title='QRgb' data-type='unsigned int' data-ref="QRgb">QRgb</a> <dfn class="decl def fn" id="_ZNK12QColorTrcLut12fromLinear64E7QRgba64" title='QColorTrcLut::fromLinear64' data-ref="_ZNK12QColorTrcLut12fromLinear64E7QRgba64">fromLinear64</dfn>(<a class="type" href="qrgba64.h.html#QRgba64" title='QRgba64' data-ref="QRgba64">QRgba64</a> <dfn class="local col2 decl" id="132rgb64" title='rgb64' data-type='QRgba64' data-ref="132rgb64">rgb64</dfn>) <em>const</em></td></tr>
<tr><th id="117">117</th><td>    {</td></tr>
<tr><th id="118">118</th><td><u>#<span data-ppcond="118">if</span> defined(<span class="macro" data-ref="_M/__SSE2__">__SSE2__</span>)</u></td></tr>
<tr><th id="119">119</th><td>        <span class='typedef' title='__m128i' data-type='__attribute__((__vector_size__(2 * sizeof(long long)))) long long' data-ref="__m128i">__m128i</span> <dfn class="local col3 decl" id="133v" title='v' data-type='__m128i' data-ref="133v">v</dfn> = <span class='ref fn' title='_mm_loadl_epi64' data-ref="_ZL15_mm_loadl_epi64PKDv2_x">_mm_loadl_epi64</span>(<span class='inlayHint'>p:&nbsp;</span><b>reinterpret_cast</b>&lt;<em>const</em> <span class='typedef' title='__m128i' data-type='__attribute__((__vector_size__(2 * sizeof(long long)))) long long' data-ref="__m128i">__m128i</span> *&gt;(&amp;<a class="local col2 ref" href="#132rgb64" title='rgb64' data-ref="132rgb64">rgb64</a>));</td></tr>
<tr><th id="120">120</th><td>        <a class="local col3 ref" href="#133v" title='v' data-ref="133v">v</a> = <span class='ref fn' title='_mm_sub_epi16' data-ref="_ZL13_mm_sub_epi16Dv2_xS_">_mm_sub_epi16</span>(<span class='inlayHint'>a:&nbsp;</span><a class="local col3 ref" href="#133v" title='v' data-ref="133v">v</a>, <span class='inlayHint'>b:&nbsp;</span><span class='ref fn' title='_mm_srli_epi16' data-ref="_ZL14_mm_srli_epi16Dv2_xi">_mm_srli_epi16</span>(<span class='inlayHint'>a:&nbsp;</span><a class="local col3 ref" href="#133v" title='v' data-ref="133v">v</a>, <span class='inlayHint'>count:&nbsp;</span><var>8</var>));</td></tr>
<tr><th id="121">121</th><td>        <em>const</em> <span class='typedef' title='__m128i' data-type='__attribute__((__vector_size__(2 * sizeof(long long)))) long long' data-ref="__m128i">__m128i</span> <dfn class="local col4 decl" id="134vidx" title='vidx' data-type='const __m128i' data-ref="134vidx">vidx</dfn> = <span class='ref fn' title='_mm_srli_epi16' data-ref="_ZL14_mm_srli_epi16Dv2_xi">_mm_srli_epi16</span>(<span class='inlayHint'>a:&nbsp;</span><a class="local col3 ref" href="#133v" title='v' data-ref="133v">v</a>, <span class='inlayHint'>count:&nbsp;</span><var>4</var>);</td></tr>
<tr><th id="122">122</th><td>        <em>const</em> <em>int</em> <dfn class="local col5 decl" id="135ridx" title='ridx' data-type='const int' data-ref="135ridx">ridx</dfn> = <span class="macro" title="((int)(unsigned short)__builtin_ia32_vec_ext_v8hi((__v8hi)(__m128i)(vidx), (int)(0)))" data-ref="_M/_mm_extract_epi16">_mm_extract_epi16</span>(<a class="local col4 ref" href="#134vidx" title='vidx' data-ref="134vidx">vidx</a>, <var>0</var>);</td></tr>
<tr><th id="123">123</th><td>        <em>const</em> <em>int</em> <dfn class="local col6 decl" id="136gidx" title='gidx' data-type='const int' data-ref="136gidx">gidx</dfn> = <span class="macro" title="((int)(unsigned short)__builtin_ia32_vec_ext_v8hi((__v8hi)(__m128i)(vidx), (int)(1)))" data-ref="_M/_mm_extract_epi16">_mm_extract_epi16</span>(<a class="local col4 ref" href="#134vidx" title='vidx' data-ref="134vidx">vidx</a>, <var>1</var>);</td></tr>
<tr><th id="124">124</th><td>        <em>const</em> <em>int</em> <dfn class="local col7 decl" id="137bidx" title='bidx' data-type='const int' data-ref="137bidx">bidx</dfn> = <span class="macro" title="((int)(unsigned short)__builtin_ia32_vec_ext_v8hi((__v8hi)(__m128i)(vidx), (int)(2)))" data-ref="_M/_mm_extract_epi16">_mm_extract_epi16</span>(<a class="local col4 ref" href="#134vidx" title='vidx' data-ref="134vidx">vidx</a>, <var>2</var>);</td></tr>
<tr><th id="125">125</th><td>        <a class="local col3 ref" href="#133v" title='v' data-ref="133v">v</a> = <span class="macro" title="((__m128i)__builtin_ia32_vec_set_v8hi((__v8hi)(__m128i)(v), (int)(m_fromLinear[ridx]), (int)(2)))" data-ref="_M/_mm_insert_epi16">_mm_insert_epi16</span>(<a class="local col3 ref" href="#133v" title='v' data-ref="133v">v</a>, <a class="member field" href="#QColorTrcLut::m_fromLinear" title='QColorTrcLut::m_fromLinear' data-ref="QColorTrcLut::m_fromLinear">m_fromLinear</a>[<a class="local col5 ref" href="#135ridx" title='ridx' data-ref="135ridx">ridx</a>], <var>2</var>);</td></tr>
<tr><th id="126">126</th><td>        <a class="local col3 ref" href="#133v" title='v' data-ref="133v">v</a> = <span class="macro" title="((__m128i)__builtin_ia32_vec_set_v8hi((__v8hi)(__m128i)(v), (int)(m_fromLinear[gidx]), (int)(1)))" data-ref="_M/_mm_insert_epi16">_mm_insert_epi16</span>(<a class="local col3 ref" href="#133v" title='v' data-ref="133v">v</a>, <a class="member field" href="#QColorTrcLut::m_fromLinear" title='QColorTrcLut::m_fromLinear' data-ref="QColorTrcLut::m_fromLinear">m_fromLinear</a>[<a class="local col6 ref" href="#136gidx" title='gidx' data-ref="136gidx">gidx</a>], <var>1</var>);</td></tr>
<tr><th id="127">127</th><td>        <a class="local col3 ref" href="#133v" title='v' data-ref="133v">v</a> = <span class="macro" title="((__m128i)__builtin_ia32_vec_set_v8hi((__v8hi)(__m128i)(v), (int)(m_fromLinear[bidx]), (int)(0)))" data-ref="_M/_mm_insert_epi16">_mm_insert_epi16</span>(<a class="local col3 ref" href="#133v" title='v' data-ref="133v">v</a>, <a class="member field" href="#QColorTrcLut::m_fromLinear" title='QColorTrcLut::m_fromLinear' data-ref="QColorTrcLut::m_fromLinear">m_fromLinear</a>[<a class="local col7 ref" href="#137bidx" title='bidx' data-ref="137bidx">bidx</a>], <var>0</var>);</td></tr>
<tr><th id="128">128</th><td>        <a class="local col3 ref" href="#133v" title='v' data-ref="133v">v</a> = <span class='ref fn' title='_mm_add_epi16' data-ref="_ZL13_mm_add_epi16Dv2_xS_">_mm_add_epi16</span>(<span class='inlayHint'>a:&nbsp;</span><a class="local col3 ref" href="#133v" title='v' data-ref="133v">v</a>, <span class='inlayHint'>b:&nbsp;</span><span class='ref fn' title='_mm_set1_epi16' data-ref="_ZL14_mm_set1_epi16s">_mm_set1_epi16</span>(<span class='inlayHint'>w:&nbsp;</span><var>0x80</var>));</td></tr>
<tr><th id="129">129</th><td>        <a class="local col3 ref" href="#133v" title='v' data-ref="133v">v</a> = <span class='ref fn' title='_mm_srli_epi16' data-ref="_ZL14_mm_srli_epi16Dv2_xi">_mm_srli_epi16</span>(<span class='inlayHint'>a:&nbsp;</span><a class="local col3 ref" href="#133v" title='v' data-ref="133v">v</a>, <span class='inlayHint'>count:&nbsp;</span><var>8</var>);</td></tr>
<tr><th id="130">130</th><td>        <a class="local col3 ref" href="#133v" title='v' data-ref="133v">v</a> = <span class='ref fn' title='_mm_packus_epi16' data-ref="_ZL16_mm_packus_epi16Dv2_xS_">_mm_packus_epi16</span>(<span class='inlayHint'>a:&nbsp;</span><a class="local col3 ref" href="#133v" title='v' data-ref="133v">v</a>, <span class='inlayHint'>b:&nbsp;</span><a class="local col3 ref" href="#133v" title='v' data-ref="133v">v</a>);</td></tr>
<tr><th id="131">131</th><td>        <b>return</b> <span class='ref fn' title='_mm_cvtsi128_si32' data-ref="_ZL17_mm_cvtsi128_si32Dv2_x">_mm_cvtsi128_si32</span>(<span class='inlayHint'>a:&nbsp;</span><a class="local col3 ref" href="#133v" title='v' data-ref="133v">v</a>);</td></tr>
<tr><th id="132">132</th><td><u>#<span data-ppcond="118">elif</span> (defined(__ARM_NEON__) || defined(__ARM_NEON)) &amp;&amp; Q_BYTE_ORDER == Q_LITTLE_ENDIAN</u></td></tr>
<tr><th id="133">133</th><td>        uint16x4_t v = vreinterpret_u16_u64(vmov_n_u64(rgb64));</td></tr>
<tr><th id="134">134</th><td>        v = vsub_u16(v, vshr_n_u16(v, <var>8</var>));</td></tr>
<tr><th id="135">135</th><td>        <em>const</em> uint16x4_t vidx = vshr_n_u16(v, <var>4</var>);</td></tr>
<tr><th id="136">136</th><td>        <em>const</em> <em>int</em> ridx = vget_lane_u16(vidx, <var>0</var>);</td></tr>
<tr><th id="137">137</th><td>        <em>const</em> <em>int</em> gidx = vget_lane_u16(vidx, <var>1</var>);</td></tr>
<tr><th id="138">138</th><td>        <em>const</em> <em>int</em> bidx = vget_lane_u16(vidx, <var>2</var>);</td></tr>
<tr><th id="139">139</th><td>        v = vset_lane_u16(m_fromLinear[ridx], v, <var>2</var>);</td></tr>
<tr><th id="140">140</th><td>        v = vset_lane_u16(m_fromLinear[gidx], v, <var>1</var>);</td></tr>
<tr><th id="141">141</th><td>        v = vset_lane_u16(m_fromLinear[bidx], v, <var>0</var>);</td></tr>
<tr><th id="142">142</th><td>        uint8x8_t v8 = vrshrn_n_u16(vcombine_u16(v, v), <var>8</var>);</td></tr>
<tr><th id="143">143</th><td>        <b>return</b> vget_lane_u32(vreinterpret_u32_u8(v8), <var>0</var>);</td></tr>
<tr><th id="144">144</th><td><u>#else</u></td></tr>
<tr><th id="145">145</th><td>        uint a = rgb64.alpha();</td></tr>
<tr><th id="146">146</th><td>        uint r = rgb64.red();</td></tr>
<tr><th id="147">147</th><td>        uint g = rgb64.green();</td></tr>
<tr><th id="148">148</th><td>        uint b = rgb64.blue();</td></tr>
<tr><th id="149">149</th><td>        a = a - (a &gt;&gt; <var>8</var>);</td></tr>
<tr><th id="150">150</th><td>        r = r - (r &gt;&gt; <var>8</var>);</td></tr>
<tr><th id="151">151</th><td>        g = g - (g &gt;&gt; <var>8</var>);</td></tr>
<tr><th id="152">152</th><td>        b = b - (b &gt;&gt; <var>8</var>);</td></tr>
<tr><th id="153">153</th><td>        a = (a + <var>0x80</var>) &gt;&gt; <var>8</var>;</td></tr>
<tr><th id="154">154</th><td>        r = (m_fromLinear[r &gt;&gt; <var>4</var>] + <var>0x80</var>) &gt;&gt; <var>8</var>;</td></tr>
<tr><th id="155">155</th><td>        g = (m_fromLinear[g &gt;&gt; <var>4</var>] + <var>0x80</var>) &gt;&gt; <var>8</var>;</td></tr>
<tr><th id="156">156</th><td>        b = (m_fromLinear[b &gt;&gt; <var>4</var>] + <var>0x80</var>) &gt;&gt; <var>8</var>;</td></tr>
<tr><th id="157">157</th><td>        <b>return</b> (a &lt;&lt; <var>24</var>) | (r &lt;&lt; <var>16</var>) | (g &lt;&lt; <var>8</var>) | b;</td></tr>
<tr><th id="158">158</th><td><u>#<span data-ppcond="118">endif</span></u></td></tr>
<tr><th id="159">159</th><td>    }</td></tr>
<tr><th id="160">160</th><td></td></tr>
<tr><th id="161">161</th><td>    <a class="typedef" href="qrgb.h.html#QRgb" title='QRgb' data-type='unsigned int' data-ref="QRgb">QRgb</a> <dfn class="decl def fn" id="_ZNK12QColorTrcLut10fromLinearEj" title='QColorTrcLut::fromLinear' data-ref="_ZNK12QColorTrcLut10fromLinearEj">fromLinear</dfn>(<a class="typedef" href="qrgb.h.html#QRgb" title='QRgb' data-type='unsigned int' data-ref="QRgb">QRgb</a> <dfn class="local col8 decl" id="138rgb32" title='rgb32' data-type='QRgb' data-ref="138rgb32">rgb32</dfn>) <em>const</em></td></tr>
<tr><th id="162">162</th><td>    {</td></tr>
<tr><th id="163">163</th><td>        <b>return</b> <a class="member fn" href="#_ZN12QColorTrcLut16convertWithTableEjPKt" title='QColorTrcLut::convertWithTable' data-ref="_ZN12QColorTrcLut16convertWithTableEjPKt">convertWithTable</a>(<a class="local col8 ref" href="#138rgb32" title='rgb32' data-ref="138rgb32">rgb32</a>, <span class='inlayHint'>table:&nbsp;</span><a class="member field" href="#QColorTrcLut::m_fromLinear" title='QColorTrcLut::m_fromLinear' data-ref="QColorTrcLut::m_fromLinear">m_fromLinear</a>);</td></tr>
<tr><th id="164">164</th><td>    }</td></tr>
<tr><th id="165">165</th><td></td></tr>
<tr><th id="166">166</th><td>    <a class="type" href="qrgba64.h.html#QRgba64" title='QRgba64' data-ref="QRgba64">QRgba64</a> <dfn class="decl def fn" id="_ZNK12QColorTrcLut10fromLinearE7QRgba64" title='QColorTrcLut::fromLinear' data-ref="_ZNK12QColorTrcLut10fromLinearE7QRgba64">fromLinear</dfn>(<a class="type" href="qrgba64.h.html#QRgba64" title='QRgba64' data-ref="QRgba64">QRgba64</a> <dfn class="local col9 decl" id="139rgb64" title='rgb64' data-type='QRgba64' data-ref="139rgb64">rgb64</dfn>) <em>const</em></td></tr>
<tr><th id="167">167</th><td>    {</td></tr>
<tr><th id="168">168</th><td>        <b>return</b> <a class="member fn" href="#_ZN12QColorTrcLut16convertWithTableE7QRgba64PKt" title='QColorTrcLut::convertWithTable' data-ref="_ZN12QColorTrcLut16convertWithTableE7QRgba64PKt">convertWithTable</a>(<a class="ref fn fake" href="qrgba64.h.html#12" title='QRgba64::QRgba64' data-ref="_ZN7QRgba64C1ERKS_"></a><a class="local col9 ref" href="#139rgb64" title='rgb64' data-ref="139rgb64">rgb64</a>, <span class='inlayHint'>table:&nbsp;</span><a class="member field" href="#QColorTrcLut::m_fromLinear" title='QColorTrcLut::m_fromLinear' data-ref="QColorTrcLut::m_fromLinear">m_fromLinear</a>);</td></tr>
<tr><th id="169">169</th><td>    }</td></tr>
<tr><th id="170">170</th><td></td></tr>
<tr><th id="171">171</th><td>    <em>int</em> <dfn class="decl def fn" id="_ZNK12QColorTrcLut15u8FromLinearF32Ef" title='QColorTrcLut::u8FromLinearF32' data-ref="_ZNK12QColorTrcLut15u8FromLinearF32Ef">u8FromLinearF32</dfn>(<em>float</em> <dfn class="local col0 decl" id="140f" title='f' data-type='float' data-ref="140f">f</dfn>) <em>const</em></td></tr>
<tr><th id="172">172</th><td>    {</td></tr>
<tr><th id="173">173</th><td>        <a class="typedef" href="../../../../include/x86_64-linux-gnu/sys/types.h.html#ushort" title='ushort' data-type='unsigned short' data-ref="ushort">ushort</a> <dfn class="local col1 decl" id="141v" title='v' data-type='ushort' data-ref="141v">v</dfn> = <a class="member field" href="#QColorTrcLut::m_fromLinear" title='QColorTrcLut::m_fromLinear' data-ref="QColorTrcLut::m_fromLinear">m_fromLinear</a>[(<em>int</em>)(<a class="local col0 ref" href="#140f" title='f' data-ref="140f">f</a> * (<var>255</var> * <var>16</var>) + <var>0.5f</var>)];</td></tr>
<tr><th id="174">174</th><td>        <b>return</b> (<a class="local col1 ref" href="#141v" title='v' data-ref="141v">v</a> + <var>0x80</var>) &gt;&gt; <var>8</var>;</td></tr>
<tr><th id="175">175</th><td>    }</td></tr>
<tr><th id="176">176</th><td>    <em>int</em> <dfn class="decl def fn" id="_ZNK12QColorTrcLut16u16FromLinearF32Ef" title='QColorTrcLut::u16FromLinearF32' data-ref="_ZNK12QColorTrcLut16u16FromLinearF32Ef">u16FromLinearF32</dfn>(<em>float</em> <dfn class="local col2 decl" id="142f" title='f' data-type='float' data-ref="142f">f</dfn>) <em>const</em></td></tr>
<tr><th id="177">177</th><td>    {</td></tr>
<tr><th id="178">178</th><td>        <a class="typedef" href="../../../../include/x86_64-linux-gnu/sys/types.h.html#ushort" title='ushort' data-type='unsigned short' data-ref="ushort">ushort</a> <dfn class="local col3 decl" id="143v" title='v' data-type='ushort' data-ref="143v">v</dfn> = <a class="member field" href="#QColorTrcLut::m_fromLinear" title='QColorTrcLut::m_fromLinear' data-ref="QColorTrcLut::m_fromLinear">m_fromLinear</a>[(<em>int</em>)(<a class="local col2 ref" href="#142f" title='f' data-ref="142f">f</a> * (<var>255</var> * <var>16</var>) + <var>0.5f</var>)];</td></tr>
<tr><th id="179">179</th><td>        <b>return</b> <a class="local col3 ref" href="#143v" title='v' data-ref="143v">v</a> + (<a class="local col3 ref" href="#143v" title='v' data-ref="143v">v</a> &gt;&gt; <var>8</var>);</td></tr>
<tr><th id="180">180</th><td>    }</td></tr>
<tr><th id="181">181</th><td>    <em>float</em> <dfn class="decl def fn" id="_ZNK12QColorTrcLut10fromLinearEf" title='QColorTrcLut::fromLinear' data-ref="_ZNK12QColorTrcLut10fromLinearEf">fromLinear</dfn>(<em>float</em> <dfn class="local col4 decl" id="144f" title='f' data-type='float' data-ref="144f">f</dfn>) <em>const</em></td></tr>
<tr><th id="182">182</th><td>    {</td></tr>
<tr><th id="183">183</th><td>        <a class="typedef" href="../../../../include/x86_64-linux-gnu/sys/types.h.html#ushort" title='ushort' data-type='unsigned short' data-ref="ushort">ushort</a> <dfn class="local col5 decl" id="145v" title='v' data-type='ushort' data-ref="145v">v</dfn> = <a class="member field" href="#QColorTrcLut::m_fromLinear" title='QColorTrcLut::m_fromLinear' data-ref="QColorTrcLut::m_fromLinear">m_fromLinear</a>[(<em>int</em>)(<a class="local col4 ref" href="#144f" title='f' data-ref="144f">f</a> * (<var>255</var> * <var>16</var>) + <var>0.5f</var>)];</td></tr>
<tr><th id="184">184</th><td>        <b>return</b> <a class="local col5 ref" href="#145v" title='v' data-ref="145v">v</a> * (<var>1.0f</var> / (<var>255</var>*<var>256</var>));</td></tr>
<tr><th id="185">185</th><td>    }</td></tr>
<tr><th id="186">186</th><td></td></tr>
<tr><th id="187">187</th><td>    <i>// We translate to 0-65280 (255*256) instead to 0-65535 to make simple</i></td></tr>
<tr><th id="188">188</th><td><i>    // shifting an accurate conversion.</i></td></tr>
<tr><th id="189">189</th><td><i>    // We translate from 0-4080 (255*16) for the same speed up, and to keep</i></td></tr>
<tr><th id="190">190</th><td><i>    // the tables small enough to fit in most inner caches.</i></td></tr>
<tr><th id="191">191</th><td>    <a class="typedef" href="../../../../include/x86_64-linux-gnu/sys/types.h.html#ushort" title='ushort' data-type='unsigned short' data-ref="ushort">ushort</a> <dfn class="decl field" id="QColorTrcLut::m_toLinear" title='QColorTrcLut::m_toLinear' data-ref="QColorTrcLut::m_toLinear">m_toLinear</dfn>[(<var>255</var> * <var>16</var>) + <var>1</var>]; <i>// [0-4080] -&gt; [0-65280]</i></td></tr>
<tr><th id="192">192</th><td>    <a class="typedef" href="../../../../include/x86_64-linux-gnu/sys/types.h.html#ushort" title='ushort' data-type='unsigned short' data-ref="ushort">ushort</a> <dfn class="decl field" id="QColorTrcLut::m_fromLinear" title='QColorTrcLut::m_fromLinear' data-ref="QColorTrcLut::m_fromLinear">m_fromLinear</dfn>[(<var>255</var> * <var>16</var>) + <var>1</var>]; <i>// [0-4080] -&gt; [0-65280]</i></td></tr>
<tr><th id="193">193</th><td></td></tr>
<tr><th id="194">194</th><td><b>private</b>:</td></tr>
<tr><th id="195">195</th><td>    <dfn class="decl def fn" id="_ZN12QColorTrcLutC1Ev" title='QColorTrcLut::QColorTrcLut' data-ref="_ZN12QColorTrcLutC1Ev">QColorTrcLut</dfn>() { } <i>// force uninitialized members</i></td></tr>
<tr><th id="196">196</th><td></td></tr>
<tr><th id="197">197</th><td>    <em>static</em> <span class="namespace">std::</span><a class="type" href="../../../../include/c++/9/bits/shared_ptr_base.h.html#std::shared_ptr" title='std::shared_ptr' data-ref="std::shared_ptr">shared_ptr</a>&lt;<a class="type" href="#QColorTrcLut" title='QColorTrcLut' data-ref="QColorTrcLut">QColorTrcLut</a>&gt; <dfn class="decl fn" id="_ZN12QColorTrcLut6createEv" title='QColorTrcLut::create' data-ref="_ZN12QColorTrcLut6createEv">create</dfn>();</td></tr>
<tr><th id="198">198</th><td></td></tr>
<tr><th id="199">199</th><td>    <a class="macro" href="../../corelib/global/qcompilerdetection.h.html#1273" title="inline __attribute__((always_inline))" data-ref="_M/Q_ALWAYS_INLINE">Q_ALWAYS_INLINE</a> <em>static</em> <a class="typedef" href="qrgb.h.html#QRgb" title='QRgb' data-type='unsigned int' data-ref="QRgb">QRgb</a> <dfn class="decl def fn" id="_ZN12QColorTrcLut16convertWithTableEjPKt" title='QColorTrcLut::convertWithTable' data-ref="_ZN12QColorTrcLut16convertWithTableEjPKt">convertWithTable</dfn>(<a class="typedef" href="qrgb.h.html#QRgb" title='QRgb' data-type='unsigned int' data-ref="QRgb">QRgb</a> <dfn class="local col6 decl" id="146rgb32" title='rgb32' data-type='QRgb' data-ref="146rgb32">rgb32</dfn>, <em>const</em> <a class="typedef" href="../../../../include/x86_64-linux-gnu/sys/types.h.html#ushort" title='ushort' data-type='unsigned short' data-ref="ushort">ushort</a> *<dfn class="local col7 decl" id="147table" title='table' data-type='const ushort *' data-ref="147table">table</dfn>)</td></tr>
<tr><th id="200">200</th><td>    {</td></tr>
<tr><th id="201">201</th><td>        <em>const</em> <em>int</em> <dfn class="local col8 decl" id="148r" title='r' data-type='const int' data-ref="148r">r</dfn> = (<a class="local col7 ref" href="#147table" title='table' data-ref="147table">table</a>[<a class="ref fn" href="qrgb.h.html#_Z4qRedj" title='qRed' data-ref="_Z4qRedj">qRed</a>(<span class='inlayHint'>rgb:&nbsp;</span><a class="local col6 ref" href="#146rgb32" title='rgb32' data-ref="146rgb32">rgb32</a>) &lt;&lt; <var>4</var>] + <var>0x80</var>) &gt;&gt; <var>8</var>;</td></tr>
<tr><th id="202">202</th><td>        <em>const</em> <em>int</em> <dfn class="local col9 decl" id="149g" title='g' data-type='const int' data-ref="149g">g</dfn> = (<a class="local col7 ref" href="#147table" title='table' data-ref="147table">table</a>[<a class="ref fn" href="qrgb.h.html#_Z6qGreenj" title='qGreen' data-ref="_Z6qGreenj">qGreen</a>(<span class='inlayHint'>rgb:&nbsp;</span><a class="local col6 ref" href="#146rgb32" title='rgb32' data-ref="146rgb32">rgb32</a>) &lt;&lt; <var>4</var>] + <var>0x80</var>) &gt;&gt; <var>8</var>;</td></tr>
<tr><th id="203">203</th><td>        <em>const</em> <em>int</em> <dfn class="local col0 decl" id="150b" title='b' data-type='const int' data-ref="150b">b</dfn> = (<a class="local col7 ref" href="#147table" title='table' data-ref="147table">table</a>[<a class="ref fn" href="qrgb.h.html#_Z5qBluej" title='qBlue' data-ref="_Z5qBluej">qBlue</a>(<span class='inlayHint'>rgb:&nbsp;</span><a class="local col6 ref" href="#146rgb32" title='rgb32' data-ref="146rgb32">rgb32</a>) &lt;&lt; <var>4</var>] + <var>0x80</var>) &gt;&gt; <var>8</var>;</td></tr>
<tr><th id="204">204</th><td>        <b>return</b> (<a class="local col6 ref" href="#146rgb32" title='rgb32' data-ref="146rgb32">rgb32</a> &amp; <var>0xff000000</var>) | (<a class="local col8 ref" href="#148r" title='r' data-ref="148r">r</a> &lt;&lt; <var>16</var>) | (<a class="local col9 ref" href="#149g" title='g' data-ref="149g">g</a> &lt;&lt; <var>8</var>) | <a class="local col0 ref" href="#150b" title='b' data-ref="150b">b</a>;</td></tr>
<tr><th id="205">205</th><td>    }</td></tr>
<tr><th id="206">206</th><td>    <a class="macro" href="../../corelib/global/qcompilerdetection.h.html#1273" title="inline __attribute__((always_inline))" data-ref="_M/Q_ALWAYS_INLINE">Q_ALWAYS_INLINE</a> <em>static</em> <a class="type" href="qrgba64.h.html#QRgba64" title='QRgba64' data-ref="QRgba64">QRgba64</a> <dfn class="decl def fn" id="_ZN12QColorTrcLut16convertWithTableE7QRgba64PKt" title='QColorTrcLut::convertWithTable' data-ref="_ZN12QColorTrcLut16convertWithTableE7QRgba64PKt">convertWithTable</dfn>(<a class="type" href="qrgba64.h.html#QRgba64" title='QRgba64' data-ref="QRgba64">QRgba64</a> <dfn class="local col1 decl" id="151rgb64" title='rgb64' data-type='QRgba64' data-ref="151rgb64">rgb64</dfn>, <em>const</em> <a class="typedef" href="../../../../include/x86_64-linux-gnu/sys/types.h.html#ushort" title='ushort' data-type='unsigned short' data-ref="ushort">ushort</a> *<dfn class="local col2 decl" id="152table" title='table' data-type='const ushort *' data-ref="152table">table</dfn>)</td></tr>
<tr><th id="207">207</th><td>    {</td></tr>
<tr><th id="208">208</th><td><u>#<span data-ppcond="208">if</span> defined(<span class="macro" data-ref="_M/__SSE2__">__SSE2__</span>)</u></td></tr>
<tr><th id="209">209</th><td>        <span class='typedef' title='__m128i' data-type='__attribute__((__vector_size__(2 * sizeof(long long)))) long long' data-ref="__m128i">__m128i</span> <dfn class="local col3 decl" id="153v" title='v' data-type='__m128i' data-ref="153v">v</dfn> = <span class='ref fn' title='_mm_loadl_epi64' data-ref="_ZL15_mm_loadl_epi64PKDv2_x">_mm_loadl_epi64</span>(<span class='inlayHint'>p:&nbsp;</span><b>reinterpret_cast</b>&lt;<em>const</em> <span class='typedef' title='__m128i' data-type='__attribute__((__vector_size__(2 * sizeof(long long)))) long long' data-ref="__m128i">__m128i</span> *&gt;(&amp;<a class="local col1 ref" href="#151rgb64" title='rgb64' data-ref="151rgb64">rgb64</a>));</td></tr>
<tr><th id="210">210</th><td>        <a class="local col3 ref" href="#153v" title='v' data-ref="153v">v</a> = <span class='ref fn' title='_mm_sub_epi16' data-ref="_ZL13_mm_sub_epi16Dv2_xS_">_mm_sub_epi16</span>(<span class='inlayHint'>a:&nbsp;</span><a class="local col3 ref" href="#153v" title='v' data-ref="153v">v</a>, <span class='inlayHint'>b:&nbsp;</span><span class='ref fn' title='_mm_srli_epi16' data-ref="_ZL14_mm_srli_epi16Dv2_xi">_mm_srli_epi16</span>(<span class='inlayHint'>a:&nbsp;</span><a class="local col3 ref" href="#153v" title='v' data-ref="153v">v</a>, <span class='inlayHint'>count:&nbsp;</span><var>8</var>));</td></tr>
<tr><th id="211">211</th><td>        <em>const</em> <span class='typedef' title='__m128i' data-type='__attribute__((__vector_size__(2 * sizeof(long long)))) long long' data-ref="__m128i">__m128i</span> <dfn class="local col4 decl" id="154vidx" title='vidx' data-type='const __m128i' data-ref="154vidx">vidx</dfn> = <span class='ref fn' title='_mm_srli_epi16' data-ref="_ZL14_mm_srli_epi16Dv2_xi">_mm_srli_epi16</span>(<span class='inlayHint'>a:&nbsp;</span><a class="local col3 ref" href="#153v" title='v' data-ref="153v">v</a>, <span class='inlayHint'>count:&nbsp;</span><var>4</var>);</td></tr>
<tr><th id="212">212</th><td>        <em>const</em> <em>int</em> <dfn class="local col5 decl" id="155ridx" title='ridx' data-type='const int' data-ref="155ridx">ridx</dfn> = <span class="macro" title="((int)(unsigned short)__builtin_ia32_vec_ext_v8hi((__v8hi)(__m128i)(vidx), (int)(2)))" data-ref="_M/_mm_extract_epi16">_mm_extract_epi16</span>(<a class="local col4 ref" href="#154vidx" title='vidx' data-ref="154vidx">vidx</a>, <var>2</var>);</td></tr>
<tr><th id="213">213</th><td>        <em>const</em> <em>int</em> <dfn class="local col6 decl" id="156gidx" title='gidx' data-type='const int' data-ref="156gidx">gidx</dfn> = <span class="macro" title="((int)(unsigned short)__builtin_ia32_vec_ext_v8hi((__v8hi)(__m128i)(vidx), (int)(1)))" data-ref="_M/_mm_extract_epi16">_mm_extract_epi16</span>(<a class="local col4 ref" href="#154vidx" title='vidx' data-ref="154vidx">vidx</a>, <var>1</var>);</td></tr>
<tr><th id="214">214</th><td>        <em>const</em> <em>int</em> <dfn class="local col7 decl" id="157bidx" title='bidx' data-type='const int' data-ref="157bidx">bidx</dfn> = <span class="macro" title="((int)(unsigned short)__builtin_ia32_vec_ext_v8hi((__v8hi)(__m128i)(vidx), (int)(0)))" data-ref="_M/_mm_extract_epi16">_mm_extract_epi16</span>(<a class="local col4 ref" href="#154vidx" title='vidx' data-ref="154vidx">vidx</a>, <var>0</var>);</td></tr>
<tr><th id="215">215</th><td>        <a class="local col3 ref" href="#153v" title='v' data-ref="153v">v</a> = <span class="macro" title="((__m128i)__builtin_ia32_vec_set_v8hi((__v8hi)(__m128i)(v), (int)(table[ridx]), (int)(2)))" data-ref="_M/_mm_insert_epi16">_mm_insert_epi16</span>(<a class="local col3 ref" href="#153v" title='v' data-ref="153v">v</a>, <a class="local col2 ref" href="#152table" title='table' data-ref="152table">table</a>[<a class="local col5 ref" href="#155ridx" title='ridx' data-ref="155ridx">ridx</a>], <var>2</var>);</td></tr>
<tr><th id="216">216</th><td>        <a class="local col3 ref" href="#153v" title='v' data-ref="153v">v</a> = <span class="macro" title="((__m128i)__builtin_ia32_vec_set_v8hi((__v8hi)(__m128i)(v), (int)(table[gidx]), (int)(1)))" data-ref="_M/_mm_insert_epi16">_mm_insert_epi16</span>(<a class="local col3 ref" href="#153v" title='v' data-ref="153v">v</a>, <a class="local col2 ref" href="#152table" title='table' data-ref="152table">table</a>[<a class="local col6 ref" href="#156gidx" title='gidx' data-ref="156gidx">gidx</a>], <var>1</var>);</td></tr>
<tr><th id="217">217</th><td>        <a class="local col3 ref" href="#153v" title='v' data-ref="153v">v</a> = <span class="macro" title="((__m128i)__builtin_ia32_vec_set_v8hi((__v8hi)(__m128i)(v), (int)(table[bidx]), (int)(0)))" data-ref="_M/_mm_insert_epi16">_mm_insert_epi16</span>(<a class="local col3 ref" href="#153v" title='v' data-ref="153v">v</a>, <a class="local col2 ref" href="#152table" title='table' data-ref="152table">table</a>[<a class="local col7 ref" href="#157bidx" title='bidx' data-ref="157bidx">bidx</a>], <var>0</var>);</td></tr>
<tr><th id="218">218</th><td>        <a class="local col3 ref" href="#153v" title='v' data-ref="153v">v</a> = <span class='ref fn' title='_mm_add_epi16' data-ref="_ZL13_mm_add_epi16Dv2_xS_">_mm_add_epi16</span>(<span class='inlayHint'>a:&nbsp;</span><a class="local col3 ref" href="#153v" title='v' data-ref="153v">v</a>, <span class='inlayHint'>b:&nbsp;</span><span class='ref fn' title='_mm_srli_epi16' data-ref="_ZL14_mm_srli_epi16Dv2_xi">_mm_srli_epi16</span>(<span class='inlayHint'>a:&nbsp;</span><a class="local col3 ref" href="#153v" title='v' data-ref="153v">v</a>, <span class='inlayHint'>count:&nbsp;</span><var>8</var>));</td></tr>
<tr><th id="219">219</th><td>        <a class="type" href="qrgba64.h.html#QRgba64" title='QRgba64' data-ref="QRgba64">QRgba64</a> <a class="ref fn fake" href="qrgba64.h.html#_ZN7QRgba64C1Ev" title='QRgba64::QRgba64' data-ref="_ZN7QRgba64C1Ev"></a><dfn class="local col8 decl" id="158rgba64" title='rgba64' data-type='QRgba64' data-ref="158rgba64">rgba64</dfn>;</td></tr>
<tr><th id="220">220</th><td>        <span class='ref fn' title='_mm_storel_epi64' data-ref="_ZL16_mm_storel_epi64PDv2_xS_">_mm_storel_epi64</span>(<span class='inlayHint'>p:&nbsp;</span><b>reinterpret_cast</b>&lt;<span class='typedef' title='__m128i' data-type='__attribute__((__vector_size__(2 * sizeof(long long)))) long long' data-ref="__m128i">__m128i</span> *&gt;(&amp;<a class="local col8 ref" href="#158rgba64" title='rgba64' data-ref="158rgba64">rgba64</a>), <span class='inlayHint'>a:&nbsp;</span><a class="local col3 ref" href="#153v" title='v' data-ref="153v">v</a>);</td></tr>
<tr><th id="221">221</th><td>        <b>return</b> <a class="ref fn fake" href="qrgba64.h.html#12" title='QRgba64::QRgba64' data-ref="_ZN7QRgba64C1EOS_"></a><a class="local col8 ref" href="#158rgba64" title='rgba64' data-ref="158rgba64">rgba64</a>;</td></tr>
<tr><th id="222">222</th><td><u>#<span data-ppcond="208">elif</span> (defined(__ARM_NEON__) || defined(__ARM_NEON)) &amp;&amp; Q_BYTE_ORDER == Q_LITTLE_ENDIAN</u></td></tr>
<tr><th id="223">223</th><td>        uint16x4_t v = vreinterpret_u16_u64(vmov_n_u64(rgb64));</td></tr>
<tr><th id="224">224</th><td>        v = vsub_u16(v, vshr_n_u16(v, <var>8</var>));</td></tr>
<tr><th id="225">225</th><td>        <em>const</em> uint16x4_t vidx = vshr_n_u16(v, <var>4</var>);</td></tr>
<tr><th id="226">226</th><td>        <em>const</em> <em>int</em> ridx = vget_lane_u16(vidx, <var>2</var>);</td></tr>
<tr><th id="227">227</th><td>        <em>const</em> <em>int</em> gidx = vget_lane_u16(vidx, <var>1</var>);</td></tr>
<tr><th id="228">228</th><td>        <em>const</em> <em>int</em> bidx = vget_lane_u16(vidx, <var>0</var>);</td></tr>
<tr><th id="229">229</th><td>        v = vset_lane_u16(table[ridx], v, <var>2</var>);</td></tr>
<tr><th id="230">230</th><td>        v = vset_lane_u16(table[gidx], v, <var>1</var>);</td></tr>
<tr><th id="231">231</th><td>        v = vset_lane_u16(table[bidx], v, <var>0</var>);</td></tr>
<tr><th id="232">232</th><td>        v = vadd_u16(v, vshr_n_u16(v, <var>8</var>));</td></tr>
<tr><th id="233">233</th><td>        <b>return</b> QRgba64::fromRgba64(vget_lane_u64(vreinterpret_u64_u16(v), <var>0</var>));</td></tr>
<tr><th id="234">234</th><td><u>#else</u></td></tr>
<tr><th id="235">235</th><td>        ushort r = rgb64.red();</td></tr>
<tr><th id="236">236</th><td>        ushort g = rgb64.green();</td></tr>
<tr><th id="237">237</th><td>        ushort b = rgb64.blue();</td></tr>
<tr><th id="238">238</th><td>        r = r - (r &gt;&gt; <var>8</var>);</td></tr>
<tr><th id="239">239</th><td>        g = g - (g &gt;&gt; <var>8</var>);</td></tr>
<tr><th id="240">240</th><td>        b = b - (b &gt;&gt; <var>8</var>);</td></tr>
<tr><th id="241">241</th><td>        r = table[r &gt;&gt; <var>4</var>];</td></tr>
<tr><th id="242">242</th><td>        g = table[g &gt;&gt; <var>4</var>];</td></tr>
<tr><th id="243">243</th><td>        b = table[b &gt;&gt; <var>4</var>];</td></tr>
<tr><th id="244">244</th><td>        r = r + (r &gt;&gt; <var>8</var>);</td></tr>
<tr><th id="245">245</th><td>        g = g + (g &gt;&gt; <var>8</var>);</td></tr>
<tr><th id="246">246</th><td>        b = b + (b &gt;&gt; <var>8</var>);</td></tr>
<tr><th id="247">247</th><td>        <b>return</b> QRgba64::fromRgba64(r, g, b, rgb64.alpha());</td></tr>
<tr><th id="248">248</th><td><u>#<span data-ppcond="208">endif</span></u></td></tr>
<tr><th id="249">249</th><td>    }</td></tr>
<tr><th id="250">250</th><td>};</td></tr>
<tr><th id="251">251</th><td></td></tr>
<tr><th id="252">252</th><td><a class="macro" href="../../corelib/global/qtconfigmacros.h.html#104" title="" data-ref="_M/QT_END_NAMESPACE">QT_END_NAMESPACE</a></td></tr>
<tr><th id="253">253</th><td></td></tr>
<tr><th id="254">254</th><td><u>#<span data-ppcond="4">endif</span> // QCOLORTRCLUT_P_H</u></td></tr>
<tr><th id="255">255</th><td></td></tr>
</table><hr/><p id='footer'>
Generated while processing <a href='../image/qimage.cpp.html'>qtbase-6.5.0/src/gui/image/qimage.cpp</a><br/>Generated on <em>2024-Jun-13</em> from project qtbase-6.5.0 revision <em>6.5.0</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
